<!DOCTYPE html>
<html lang="fr">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <script src="https://cdn.tailwindcss.com"></script>
  <title>Centralisation</title>
  <meta name="description" content="Agrégateur de liens pour les étudiants de l'École Centrale de Lyon" />
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>

  <!-- Give access to Google search console -->
  <meta name="google-site-verification" content="zr0xe6RJrvtDwccOO9guGDEK5dUHHZFdofchU6l2We4" />

  <link rel="icon" type="image/x-icon" href="assets/favicons/images/favicon.ico" />
  <link rel="icon" type="image/png" sizes="32x32" href="assets/favicons/favicon-32x32.png" />
  <link
        href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap"
        rel="stylesheet">

  <script defer data-domain="centralassociation.eclair.ec-lyon.fr"
    src="https://plausible.eclair.ec-lyon.fr/js/script.outbound-links.js"></script>
</head>

<body style="font-family: 'Poppins', system-ui;">

  <!-- Drawer button -->
  <button onclick="toggleDrawer()" aria-expanded="false" aria-controls="drawer" class="fixed top-5 left-5 z-50">
    <svg class="w-10 h-10" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
      <path d="M3,6H21V8H3V6M3,11H21V13H3V11M3,16H21V18H3V16Z" />
    </svg>
  </button>

  <!-- Drawer -->
  <div id="drawer" aria-expanded="false" class="bg-white fixed top-0 left-0 z-40 h-screen w-1/6 overflow-y-auto transition-transform -translate-x-full aria-expanded:translate-x-0 ease-in-out pt-16">
    <ul class="w-full h-full flex flex-col">
      {% for banner in banners %}
      <li><a href="#{{banner.name}}" onclick='toggleDrawer()' class="inline-block h-10 pl-2 w-full leading-10 hover:bg-slate-300">{{banner.name}}</a></li>
      {% endfor %}
    </ul>

  </div>
  <div id="drawer-mask" onclick='toggleDrawer()' class="bg-black/75 w-screen h-screen absolute top-0 left-0 z-[35] hidden aria-expanded:block" aria-expanded="false">
  </div>



  <div id="content" class="h-screen w-screen snap-mandatory snap-y overflow-y-scroll overflow-x-hidden z-0 bg-white dark:bg-neutral-800">


    {% for banner in banners %}
    <section id="{{banner.name}}" data-primary_color="{{banner.color}}" data-secondary_color="{{banner.secondary_color}}" data-invert="{{banner.invert if 'invert' in banner}}"
      class="banners flex relative snap-start h-screen w-screen justify-start items-start p-10 z-8 pt-24">

      <div class="absolute right-0 w-1/3 top-1/2 -translate-y-1/2 z-0">
        <img src="./assets/icons/{{ banner.icon }}" class="w-full translate-x-1/4 drop-shadow-xl" />
      </div>

      <div class="flex flex-col max-w-5/6 w-2/3 h-full p-10 justify-between z-0">

        <h1 class="h-1/4 text-5xl md:text-6xl lg:text-7xl font-mono font-bold text-gray-700 z-0">{{ banner.name }}</h1>

        <div class="w-full grid grid-cols-3 gap-4 p-4 overflow-y-scroll z-10">
          {% for link in banner.links %}
            <a href="{{ link.url }}" class="flex flex-col items-center h-full">
              <img class="h-5/6 hover:drop-shadow-md" src="./assets/icons/{{ link.icon }}" alt="{{ link.name }}" />
              <p class="overflow-y-hidden">{{link.name}}</p>
            </a>
          {% endfor %}
        </div>
      </div>

    </section>
    {% endfor %}
  </div>
</body>
<script>

  const colors = Array.from(document.getElementsByClassName('banners')).map(b => b.getAttribute('data-primary_color'));

  const content = document.getElementById("content");

  content.addEventListener("scroll", (event) => {
    
    var x = content.scrollTop;
    var y = window.innerHeight;

    const color = colors[~~((x+0.5*y)/y)];

  });

  let drawer_mask = document.getElementById("drawer-mask");
  let drawer = document.getElementById("drawer");

  let toggleDrawer = () => {
    if (drawer.ariaExpanded === "true"){
      drawer_mask.ariaExpanded = "false";
      drawer.ariaExpanded = "false";
    } else {
      drawer_mask.ariaExpanded = "true";
      drawer.ariaExpanded = "true";
    }
  };

</script>

</html>